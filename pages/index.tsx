import type { NextPage } from 'next'
import Head from 'next/head'
import useSWR, { Fetcher } from 'swr'
import Blog from '../models/blog'
import Button from '../components/button'
import styled, { ThemeProvider } from 'styled-components'
import { GlobalStyles, StyledContainer, StyledSpan, borderRadius } from '../styles'

const Container = styled(StyledContainer)`
  padding: 0 2rem;
  user-select: none;
`

const Main = styled.main`
  min-height: 100vh;
  padding: 4rem 0;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`

const Title = styled.h1`
  margin: 0 0 3rem 0;
  line-height: 1.15;
  font-size: 4rem;
`

const Home: NextPage = () => {

  const fetcher: Fetcher<Blog[]> = (url: string) => fetch(url).then(res => res.json());

  const { data } = useSWR<Blog[]>('api/blogs', fetcher)

  if (!data) {
    return <p>Loading...</p>
  }

  return (
    <ThemeProvider theme={{ mode: 'dark' }}>
      <GlobalStyles />
      <Container variant='default'>
        <Head>
          <title>Author.io</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <Main>
          <Title>
            Welcome to <StyledSpan variant='primary'>Author.io</StyledSpan>
          </Title>
          <Button>Get Started</Button>
        </Main>
      </Container>
    </ThemeProvider>
  )
}

export default Home
